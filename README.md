# Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ "Skrepta"

## Android-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¿Ğ»ĞµĞ¹ÑĞ°

**Ğ”Ğ°Ñ‚Ğ°:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°:** Android (Kotlin + Jetpack Compose)  
**Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:** Firebase Firestore + Firebase Authentication

---

## ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

| Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº | Ğ Ğ¾Ğ»ÑŒ | Ğ—Ğ¾Ğ½Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ |
|----------|------|---------------------|
| **Ğ”Ğ¸Ğ´Ğ°Ñ€** | Backend-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº | Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸, ViewModel, Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° |
| **ĞĞ»Ğ¸Ñ…Ğ°Ğ½** | Backend-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº | Firebase Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ, CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸, Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ |
| **ĞĞ°Ñ‚Ğ°Ğ»ÑŒÑ** | UI/UX Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€ | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ, ÑĞºÑ€Ğ°Ğ½Ñ‹, ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹, Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ |
| **Ğ Ğ¾Ğ¼Ğ°** | Database Engineer | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Firebase, Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸, ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… |

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ **MVVM** (Model-View-ViewModel):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VIEW                                 â”‚
â”‚  (Screens: Home, Category, Feed, Auth, Favorites, Cart)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VIEWMODEL                               â”‚
â”‚              (SkreptaViewModel.kt)                          â”‚
â”‚    - Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ UI                                    â”‚
â”‚    - ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ                     â”‚
â”‚    - Ğ¡Ğ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ View Ğ¸ Model                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MODEL                                 â”‚
â”‚  - FirebaseRepository.kt (Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Firestore)               â”‚
â”‚  - SkreptaRepository.kt (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)                  â”‚
â”‚  - Data classes (Category, FeedItem, CartItem)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FIREBASE BACKEND                           â”‚
â”‚         Firestore Database + Authentication                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
com.example.skrepta/
â”‚
â”œâ”€â”€ model/                          # Ğ¡Ğ»Ğ¾Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”œâ”€â”€ Category.kt                 # ĞœĞ¾Ğ´ĞµĞ»ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
â”‚   â”œâ”€â”€ FeedItem.kt                 # ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ² Ğ»ĞµĞ½Ñ‚Ğµ
â”‚   â”œâ”€â”€ CartItem.kt                 # ĞœĞ¾Ğ´ĞµĞ»ÑŒ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹
â”‚   â”œâ”€â”€ Repositories.kt             # Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (mock)
â”‚   â””â”€â”€ FirebaseRepository.kt       # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Firebase
â”‚
â”œâ”€â”€ viewmodel/                      # Ğ¡Ğ»Ğ¾Ğ¹ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
â”‚   â””â”€â”€ SkreptaViewModel.kt         # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ViewModel
â”‚
â””â”€â”€ view/                           # Ğ¡Ğ»Ğ¾Ğ¹ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
    â”œâ”€â”€ MainActivity.kt             # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
    â”œâ”€â”€ SkreptaApp.kt              # ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ‚ĞµĞ¼Ğ°
    â”œâ”€â”€ components/                 # UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
    â”‚   â”œâ”€â”€ Cards.kt               # ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
    â”‚   â”œâ”€â”€ GridItems.kt           # Ğ¡ĞµÑ‚ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
    â”‚   â””â”€â”€ WaveFooter.kt          # ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„ÑƒÑ‚ĞµÑ€
    â””â”€â”€ screens/                    # Ğ­ĞºÑ€Ğ°Ğ½Ñ‹
        â”œâ”€â”€ HomeScreen.kt          # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½
        â”œâ”€â”€ CategoryScreen.kt      # Ğ­ĞºÑ€Ğ°Ğ½ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
        â”œâ”€â”€ FeedScreen.kt          # Ğ›ĞµĞ½Ñ‚Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
        â”œâ”€â”€ AuthScreen.kt          # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
        â”œâ”€â”€ FavoritesScreen.kt     # Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
        â””â”€â”€ CartScreen.kt          # ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 1: BACKEND (Ğ”Ğ¸Ğ´Ğ°Ñ€, ĞĞ»Ğ¸Ñ…Ğ°Ğ½)

## 1.1 SkreptaViewModel.kt

**ĞĞ²Ñ‚Ğ¾Ñ€:** Ğ”Ğ¸Ğ´Ğ°Ñ€  
**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `viewmodel/SkreptaViewModel.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸, ÑĞ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ UI Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸

### Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (State)

```kotlin
// ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
private val _categories = MutableStateFlow<List<Category>>(emptyList())
val categories: StateFlow<List<Category>> = _categories

// Ğ›ĞµĞ½Ñ‚Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
private val _feed = MutableStateFlow<List<FeedItem>>(emptyList())
val feed: StateFlow<List<FeedItem>> = _feed

// Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ (Set Ğ¸Ğ· ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²)
private val _favorites = MutableStateFlow<Set<String>>(emptySet())
val favorites: StateFlow<Set<String>> = _favorites

// ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°
private val _cartItems = MutableStateFlow<List<CartItem>>(emptyList())
val cartItems: StateFlow<List<CartItem>> = _cartItems

// Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğµ
private val _cartCount = MutableStateFlow(0)
val cartCount: StateFlow<Int> = _cartCount

// Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
private val _isLoggedIn = MutableStateFlow(false)
val isLoggedIn: StateFlow<Boolean> = _isLoggedIn

// Email Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
private val _currentUserEmail = MutableStateFlow<String?>(null)
val currentUserEmail: StateFlow<String?> = _currentUserEmail
```

### ĞœĞµÑ‚Ğ¾Ğ´Ñ‹

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² |
|-------|----------|----------------|
| `loadLocalData()` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¸Ğ· Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ | ĞŸÑ€Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| `observeAuth()` | Ğ¡Ğ»ÑƒÑˆĞ°ĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Firebase | ĞŸÑ€Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| `observeFavorites()` | ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ² Firestore | ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ° |
| `observeCart()` | ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ Ğ² Firestore | ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ° |
| `toggleFavorite(productId)` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚/ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ | HomeScreen, CategoryScreen, FeedScreen |
| `addToCart(productId)` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ | HomeScreen, CategoryScreen, FeedScreen, FavoritesScreen |
| `removeFromCart(productId)` | Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ¸Ğ· ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ | CartScreen |
| `updateCartQuantity(productId, qty)` | Ğ˜Ğ·Ğ¼ĞµĞ½ÑĞµÑ‚ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° | CartScreen |
| `clearCart()` | ĞÑ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ²ÑÑ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ | CartScreen |
| `signOut()` | Ğ’Ñ‹Ñ…Ğ¾Ğ´ Ğ¸Ğ· Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° | HomeScreen |

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² UI:

```kotlin
// Ğ’ HomeScreen.kt
val favorites by vm.favorites.collectAsState()
val isLoggedIn by vm.isLoggedIn.collectAsState()

// ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ Ğ½Ğ° ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¾
IconButton(onClick = { 
    if (isLoggedIn) vm.toggleFavorite(item.id.toString()) 
    else onOpenAuth() 
})
```

---

## 1.2 FirebaseRepository.kt

**ĞĞ²Ñ‚Ğ¾Ñ€:** ĞĞ»Ğ¸Ñ…Ğ°Ğ½  
**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `model/FirebaseRepository.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Firebase Firestore

### CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾

#### CREATE â€” Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
```kotlin
suspend fun addToFavorites(productId: String): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        val data = hashMapOf(
            "productId" to productId,
            "addedAt" to System.currentTimeMillis()
        )
        
        firestore
            .collection("users")
            .document(userId)
            .collection("favorites")
            .document(productId)
            .set(data)
            .await()
        
        true
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ² ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ `favorites` Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ  
**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ² Firestore:** `users/{userId}/favorites/{productId}`

#### READ â€” Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ (Realtime)
```kotlin
fun getFavoritesFlow(): Flow<List<String>> = callbackFlow {
    val userId = currentUserId
    if (userId == null) {
        trySend(emptyList())
        close()
        return@callbackFlow
    }
    
    val registration = firestore
        .collection("users")
        .document(userId)
        .collection("favorites")
        .addSnapshotListener { snapshot, error ->
            if (error != null) {
                trySend(emptyList())
                return@addSnapshotListener
            }
            
            val ids = mutableListOf<String>()
            snapshot?.documents?.forEach { doc ->
                doc.getString("productId")?.let { ids.add(it) }
            }
            trySend(ids)
        }
    
    awaitClose { registration.remove() }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Flow ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ ID Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ², Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸  
**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ²:** `SkreptaViewModel.observeFavorites()`

#### DELETE â€” Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
```kotlin
suspend fun removeFromFavorites(productId: String): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        firestore
            .collection("users")
            .document(userId)
            .collection("favorites")
            .document(productId)
            .delete()
            .await()
        
        true
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¸Ğ· ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ `favorites`

---

### CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹

#### CREATE â€” Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ
```kotlin
suspend fun addToCart(productId: String): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        val docRef = firestore
            .collection("users")
            .document(userId)
            .collection("cart")
            .document(productId)
        
        val doc = docRef.get().await()
        
        if (doc.exists()) {
            // Ğ¢Ğ¾Ğ²Ğ°Ñ€ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ â€” ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾
            val currentQty = doc.getLong("quantity")?.toInt() ?: 1
            docRef.update("quantity", currentQty + 1).await()
        } else {
            // Ğ¢Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ½ĞµÑ‚ â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ½Ğ¾Ğ²Ñ‹Ğ¹
            val data = hashMapOf(
                "productId" to productId,
                "quantity" to 1,
                "addedAt" to System.currentTimeMillis()
            )
            docRef.set(data).await()
        }
        
        true
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ. Ğ•ÑĞ»Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ â€” ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ° 1  
**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ² Firestore:** `users/{userId}/cart/{productId}`

#### READ â€” Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ (Realtime)
```kotlin
fun getCartFlow(): Flow<List<CartItem>> = callbackFlow {
    val userId = currentUserId
    if (userId == null) {
        trySend(emptyList())
        close()
        return@callbackFlow
    }
    
    val registration = firestore
        .collection("users")
        .document(userId)
        .collection("cart")
        .addSnapshotListener { snapshot, error ->
            if (error != null) {
                trySend(emptyList())
                return@addSnapshotListener
            }
            
            val items = mutableListOf<CartItem>()
            snapshot?.documents?.forEach { doc ->
                val productId = doc.getString("productId") ?: return@forEach
                val quantity = doc.getLong("quantity")?.toInt() ?: 1
                val addedAt = doc.getLong("addedAt") ?: 0L
                
                items.add(
                    CartItem(
                        id = doc.id,
                        productId = productId,
                        userId = userId,
                        quantity = quantity,
                        addedAt = addedAt
                    )
                )
            }
            trySend(items)
        }
    
    awaitClose { registration.remove() }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Flow ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğµ, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

#### UPDATE â€” Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ°
```kotlin
suspend fun updateCartQuantity(productId: String, quantity: Int): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        if (quantity <= 0) {
            removeFromCart(productId)
        } else {
            firestore
                .collection("users")
                .document(userId)
                .collection("cart")
                .document(productId)
                .update("quantity", quantity)
                .await()
            true
        }
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ»Ğµ `quantity`. Ğ•ÑĞ»Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ â‰¤ 0 â€” ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€

#### DELETE â€” Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹
```kotlin
suspend fun removeFromCart(productId: String): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        firestore
            .collection("users")
            .document(userId)
            .collection("cart")
            .document(productId)
            .delete()
            .await()
        
        true
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```

#### DELETE ALL â€” ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹
```kotlin
suspend fun clearCart(): Boolean {
    val userId = currentUserId ?: return false
    
    return try {
        val snapshot = firestore
            .collection("users")
            .document(userId)
            .collection("cart")
            .get()
            .await()
        
        for (doc in snapshot.documents) {
            doc.reference.delete().await()
        }
        
        true
    } catch (e: Exception) {
        e.printStackTrace()
        false
    }
}
```
**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:** Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ğ²ÑĞµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸Ğ· ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ `cart` Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

---

## 1.3 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Firebase

**ĞĞ²Ñ‚Ğ¾Ñ€:** Ğ Ğ¾Ğ¼Ğ°  
**Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:** Firebase Firestore

### Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
firestore/
â””â”€â”€ users/                              # ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
    â””â”€â”€ {userId}/                       # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (UID Ğ¸Ğ· Auth)
        â”‚
        â”œâ”€â”€ favorites/                  # ĞŸĞ¾Ğ´ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
        â”‚   â”œâ”€â”€ {productId}/           # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ = ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
        â”‚   â”‚   â”œâ”€â”€ productId: "1"     # ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° (string)
        â”‚   â”‚   â””â”€â”€ addedAt: 173...    # Timestamp Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (long)
        â”‚   â”‚
        â”‚   â””â”€â”€ {productId}/
        â”‚       â”œâ”€â”€ productId: "3"
        â”‚       â””â”€â”€ addedAt: 173...
        â”‚
        â””â”€â”€ cart/                       # ĞŸĞ¾Ğ´ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹
            â”œâ”€â”€ {productId}/           # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ = ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
            â”‚   â”œâ”€â”€ productId: "1"     # ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° (string)
            â”‚   â”œâ”€â”€ quantity: 2        # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ (int)
            â”‚   â””â”€â”€ addedAt: 173...    # Timestamp Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (long)
            â”‚
            â””â”€â”€ {productId}/
                â”œâ”€â”€ productId: "5"
                â”œâ”€â”€ quantity: 1
                â””â”€â”€ addedAt: 173...
```

### ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### CartItem.kt
```kotlin
data class CartItem(
    val id: String = "",           // ID Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ° Ğ² Firestore
    val productId: String = "",    // ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
    val userId: String = "",       // ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    val quantity: Int = 1,         // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾
    val addedAt: Long = System.currentTimeMillis()  // Ğ’Ñ€ĞµĞ¼Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
)
```

#### Category.kt
```kotlin
data class Category(
    val id: Int,                   // ID ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
    val title: String,             // ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ("Ğ–ĞµĞ½ÑĞºĞ¸Ğ¹ ÑƒÑ…Ğ¾Ğ´")
    val imageRes: Int              // Ğ ĞµÑÑƒÑ€Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (R.drawable.cat_women)
)
```

#### FeedItem.kt
```kotlin
data class FeedItem(
    val id: Int,                   // ID Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
    val imageUrl: String? = null,  // URL Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (Ğ¸Ğ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°)
    val imageRes: Int? = null,     // Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµÑÑƒÑ€Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
    val link: String? = null       // Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ ÑĞ°Ğ¹Ñ‚
)
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 2: FRONTEND / UI (ĞĞ°Ñ‚Ğ°Ğ»ÑŒÑ)

## 2.1 ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ â€” SkreptaApp.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/SkreptaApp.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ Ñ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ (Routes)

```kotlin
enum class Route {
    Home,       // Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½
    Category,   // Ğ­ĞºÑ€Ğ°Ğ½ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
    Feed,       // Ğ›ĞµĞ½Ñ‚Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
    Auth,       // ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ/Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
    Favorites,  // Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
    Cart        // ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°
}
```

### Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```kotlin
private val SkreptaColors = lightColorScheme(
    primary = Color(0xFFdf1778),           // ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹
    onPrimary = Color.White,               // Ğ¢ĞµĞºÑÑ‚ Ğ½Ğ° Ñ€Ğ¾Ğ·Ğ¾Ğ²Ğ¾Ğ¼
    primaryContainer = Color(0xFFFFE5EE),  // Ğ¡Ğ²ĞµÑ‚Ğ»Ğ¾-Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
    secondary = Color(0xFFFF6B9D),         // Ğ’Ñ‚Ğ¾Ñ€Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹
    background = Color(0xFFFFF5F8),        // Ğ¤Ğ¾Ğ½ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
    surface = Color.White,                 // ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ¸ (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)
    onBackground = Color(0xFF1A1A2E),      // Ğ¢ĞµĞºÑÑ‚ Ğ½Ğ° Ñ„Ğ¾Ğ½Ğµ
    onSurface = Color(0xFF1A1A2E)          // Ğ¢ĞµĞºÑÑ‚ Ğ½Ğ° Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑÑ…
)
```

### Ğ“Ñ€Ğ°Ñ„ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

```kotlin
NavHost(navController = nav, startDestination = Route.Home.name) {
    
    composable(Route.Home.name) {
        HomeScreen(
            vm = vm,
            onOpenCategory = { nav.navigate(Route.Category.name) },
            onOpenFeed = { nav.navigate(Route.Feed.name) },
            onOpenAuth = { nav.navigate(Route.Auth.name) },
            onOpenFavorites = { nav.navigate(Route.Favorites.name) },
            onOpenCart = { nav.navigate(Route.Cart.name) }
        )
    }
    
    composable(Route.Category.name) {
        CategoryScreen(onBack = { nav.popBackStack() }, vm = vm)
    }
    
    composable(Route.Feed.name) {
        FeedScreen(onBack = { nav.popBackStack() }, vm = vm)
    }
    
    composable(Route.Auth.name) {
        AuthScreen(onBack = { nav.popBackStack() })
    }
    
    composable(Route.Favorites.name) {
        FavoritesScreen(
            onBack = { nav.popBackStack() },
            onOpenAuth = { nav.navigate(Route.Auth.name) },
            vm = vm
        )
    }
    
    composable(Route.Cart.name) {
        CartScreen(
            onBack = { nav.popBackStack() },
            onOpenAuth = { nav.navigate(Route.Auth.name) },
            vm = vm
        )
    }
}
```

---

## 2.2 Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½ â€” HomeScreen.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/screens/HomeScreen.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑĞºÑ€Ğ°Ğ½Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [S] Skrepta     â™¡  ğŸ›’  ğŸ‘¤         â”‚  â† TopAppBar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Ğ‘ĞĞĞĞ•Ğ  (ÑĞ»Ğ°Ğ¹Ğ´ĞµÑ€)       â”‚   â”‚  â† BannerSlider
â”‚  â”‚         â— â—‹                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ğŸ‘¤ Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ!              â”‚  â† WelcomeCard (ĞµÑĞ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½)
â”‚     user@email.com                  â”‚
â”‚                                     â”‚
â”‚  ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸          Ğ’ÑĞµ â†’ â”‚  â† SectionHeader
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”                â”‚
â”‚  â”‚   â”‚ â”‚   â”‚ â”‚   â”‚                 â”‚  â† CategoryGrid
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                 â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ğ’Ğ¾Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚   [Ğ’Ğ¾Ğ¹Ñ‚Ğ¸] â”‚   â”‚  â† AuthPromptCard (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Ğ›ĞµĞ½Ñ‚Ğ°                       Ğ’ÑĞµ â†’ â”‚  â† SectionHeader
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”                       â”‚
â”‚  â”‚ â™¡ â”‚ â”‚ â™¡ â”‚                       â”‚  â† FeedCardWithFavorite
â”‚  â”‚ + â”‚ â”‚ + â”‚                       â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                       â”‚
â”‚                                     â”‚
â”‚  ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½   â”‚  â† WaveFooter
â”‚  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ  ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸  Ğ›ĞµĞ½Ñ‚Ğ°         â”‚
â”‚  Â©2025 Skrepta                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

#### TopAppBar Ñ Ğ±ĞµĞ¹Ğ´Ğ¶Ğ°Ğ¼Ğ¸
```kotlin
TopAppBar(
    title = {
        Row(verticalAlignment = Alignment.CenterVertically) {
            // Ğ›Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿
            Box(
                modifier = Modifier
                    .size(36.dp)
                    .clip(RoundedCornerShape(10.dp))
                    .background(Brush.linearGradient(listOf(PrimaryPink, LightPink))),
                contentAlignment = Alignment.Center
            ) {
                Text("S", fontSize = 20.sp, fontWeight = FontWeight.Bold, color = Color.White)
            }
            Spacer(modifier = Modifier.width(10.dp))
            Text("Skrepta", fontWeight = FontWeight.Bold, fontSize = 22.sp)
        }
    },
    actions = {
        // Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ Ğ±ĞµĞ¹Ğ´Ğ¶ĞµĞ¼
        IconButton(onClick = onOpenFavorites) {
            BadgedBox(
                badge = {
                    if (favorites.isNotEmpty()) {
                        Badge(containerColor = PrimaryPink) {
                            Text(favorites.size.toString())
                        }
                    }
                }
            ) {
                Icon(
                    if (favorites.isNotEmpty()) Icons.Default.Favorite 
                    else Icons.Outlined.FavoriteBorder,
                    tint = if (favorites.isNotEmpty()) PrimaryPink else Color.Gray
                )
            }
        }
        
        // ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° Ñ Ğ±ĞµĞ¹Ğ´Ğ¶ĞµĞ¼
        IconButton(onClick = onOpenCart) {
            BadgedBox(
                badge = {
                    if (cartCount > 0) {
                        Badge(containerColor = PrimaryPink) {
                            Text(cartCount.toString())
                        }
                    }
                }
            ) {
                Icon(Icons.Default.ShoppingCart)
            }
        }
    }
)
```

#### ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° Ñ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¼
```kotlin
@Composable
fun FeedCardWithFavorite(
    item: FeedItem,
    isFavorite: Boolean,
    isLoggedIn: Boolean,
    onToggleFavorite: () -> Unit,
    onAddToCart: () -> Unit,
    onOpenAuth: () -> Unit
) {
    // ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸
    val scale by animateFloatAsState(
        targetValue = if (isFavorite) 1.2f else 1f,
        animationSpec = spring(
            dampingRatio = Spring.DampingRatioMediumBouncy,
            stiffness = Spring.StiffnessLow
        )
    )
    
    Card(...) {
        Box {
            // Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
            Image(...)
            
            // ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ (ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¾)
            IconButton(
                onClick = { 
                    if (isLoggedIn) onToggleFavorite() 
                    else onOpenAuth()  // Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ â€” Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½ Ğ²Ñ…Ğ¾Ğ´Ğ°
                },
                modifier = Modifier
                    .align(Alignment.TopEnd)
                    .clip(CircleShape)
                    .background(Color.White.copy(alpha = 0.9f))
            ) {
                Icon(
                    if (isFavorite) Icons.Default.Favorite 
                    else Icons.Outlined.FavoriteBorder,
                    tint = if (isFavorite) PrimaryPink else Color.Gray,
                    modifier = Modifier.scale(scale)  // ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ
                )
            }
            
            // ĞšĞ½Ğ¾Ğ¿ĞºĞ° "Ğ’ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ"
            IconButton(
                onClick = { 
                    if (isLoggedIn) onAddToCart() 
                    else onOpenAuth() 
                },
                modifier = Modifier
                    .align(Alignment.BottomEnd)
                    .clip(CircleShape)
                    .background(PrimaryPink)
            ) {
                Icon(Icons.Default.Add, tint = Color.White)
            }
        }
    }
}
```

---

## 2.3 Ğ­ĞºÑ€Ğ°Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ â€” AuthScreen.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/screens/AuthScreen.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ’Ñ…Ğ¾Ğ´ Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

### ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°

- **Ğ“Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½** Ñ Ñ€Ğ°Ğ·Ğ¼Ñ‹Ñ‚Ñ‹Ğ¼Ğ¸ Ğ´ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼Ğ¸ ĞºÑ€ÑƒĞ³Ğ°Ğ¼Ğ¸
- **ĞŸÑƒĞ»ÑŒÑĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ Ğ»Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿** "S"
- **ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ** Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²Ñ…Ğ¾Ğ´Ğ¾Ğ¼ Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹
- **ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ/ÑĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ**
- **ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ñ** Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑĞºÑ€Ğ°Ğ½Ğ°

### Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```kotlin
// Ğ’Ñ…Ğ¾Ğ´
auth.signInWithEmailAndPassword(email, pass)
    .addOnSuccessListener {
        Toast.makeText(ctx, "Ğ’Ñ…Ğ¾Ğ´ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½!", Toast.LENGTH_SHORT).show()
        onBack()  // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ½Ğ° Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¹ ÑĞºÑ€Ğ°Ğ½
    }
    .addOnFailureListener { e ->
        Toast.makeText(ctx, "ĞÑˆĞ¸Ğ±ĞºĞ°: ${e.message}", Toast.LENGTH_LONG).show()
    }
    .addOnCompleteListener { 
        isLoading = false 
    }

// Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
auth.createUserWithEmailAndPassword(email, pass)
    .addOnSuccessListener {
        Toast.makeText(ctx, "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ ÑƒÑĞ¿ĞµÑˆĞ½Ğ°!", Toast.LENGTH_SHORT).show()
        onBack()
    }
    .addOnFailureListener { e ->
        Toast.makeText(ctx, "ĞÑˆĞ¸Ğ±ĞºĞ°: ${e.message}", Toast.LENGTH_LONG).show()
    }
```

---

## 2.4 Ğ­ĞºÑ€Ğ°Ğ½ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ â€” FavoritesScreen.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/screens/FavoritesScreen.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ° Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²

### Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ÑĞºÑ€Ğ°Ğ½Ğ°

1. **ĞĞµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½** â†’ ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ¹Ñ‚Ğ¸
2. **ĞŸÑƒÑÑ‚Ğ¾Ğµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ** â†’ ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¾ + Ñ‚ĞµĞºÑÑ‚
3. **Ğ•ÑÑ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹** â†’ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº

### ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°

```kotlin
@Composable
private fun FavoriteItemCard(
    item: FeedItem,
    onRemove: () -> Unit,      // Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
    onAddToCart: () -> Unit    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ
) {
    Card(...) {
        Row(...) {
            // Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
            Box(modifier = Modifier.size(80.dp)) {
                Image(...)
            }
            
            // Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
            Column(modifier = Modifier.weight(1f)) {
                Text("Ğ¢Ğ¾Ğ²Ğ°Ñ€ #${item.id}")
                Text("Ğ’ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸", color = Color.Green)
            }
            
            // ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
            Column {
                // Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ (Ñ€Ğ¾Ğ·Ğ¾Ğ²Ğ¾Ğµ ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¾)
                IconButton(onClick = onRemove) {
                    Icon(Icons.Default.Favorite, tint = PrimaryPink)
                }
                
                // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ
                IconButton(onClick = onAddToCart) {
                    Icon(Icons.Default.ShoppingCart, tint = Color.White)
                }
            }
        }
    }
}
```

---

## 2.5 Ğ­ĞºÑ€Ğ°Ğ½ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ â€” CartScreen.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/screens/CartScreen.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº

### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»

- ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğµ
- Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° (+/-)
- Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
- ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ²ÑĞµĞ¹ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹
- ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ°

### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼

```kotlin
Row(verticalAlignment = Alignment.CenterVertically) {
    // ĞšĞ½Ğ¾Ğ¿ĞºĞ° "-"
    IconButton(
        onClick = { 
            if (cartItem.quantity > 1) 
                onUpdateQuantity(cartItem.quantity - 1)  // Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ
            else 
                onRemove()  // Ğ•ÑĞ»Ğ¸ 1 â€” ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
        }
    ) {
        Icon(Icons.Default.Remove)
    }
    
    // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾
    Text(
        text = cartItem.quantity.toString(),
        fontWeight = FontWeight.Bold
    )
    
    // ĞšĞ½Ğ¾Ğ¿ĞºĞ° "+"
    IconButton(
        onClick = { onUpdateQuantity(cartItem.quantity + 1) }
    ) {
        Icon(Icons.Default.Add)
    }
}
```

### ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

```kotlin
@Composable
private fun CheckoutPanel(itemCount: Int) {
    Surface(shadowElevation = 16.dp, color = Color.White) {
        Row(
            modifier = Modifier.fillMaxWidth().padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween
        ) {
            Column {
                Text("Ğ˜Ñ‚Ğ¾Ğ³Ğ¾", color = Color.Gray)
                Text("$itemCount ${getItemsText(itemCount)}", fontWeight = FontWeight.Bold)
            }
            
            Button(onClick = { /* TODO: ĞÑ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ° */ }) {
                Text("ĞÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·")
            }
        }
    }
}

// Ğ¡ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ²Ğ° "Ñ‚Ğ¾Ğ²Ğ°Ñ€"
private fun getItemsText(count: Int) = when {
    count % 100 in 11..19 -> "Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²"
    count % 10 == 1 -> "Ñ‚Ğ¾Ğ²Ğ°Ñ€"
    count % 10 in 2..4 -> "Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°"
    else -> "Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²"
}
```

---

## 2.6 ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ â€” WaveFooter.kt

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** `view/components/WaveFooter.kt`  
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ğ¾Ğ»Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¹ Ñ„ÑƒÑ‚ĞµÑ€

### ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ²Ğ¾Ğ»Ğ½

```kotlin
// 4 ÑĞ»Ğ¾Ñ Ğ²Ğ¾Ğ»Ğ½ Ñ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒÑ
val p1 by rememberInfiniteTransition()
    .animateFloat(0f, 1f, infiniteRepeatable(tween(4000)))
val p2 by rememberInfiniteTransition()
    .animateFloat(0f, 1f, infiniteRepeatable(tween(4000)))
val p3 by rememberInfiniteTransition()
    .animateFloat(0f, 1f, infiniteRepeatable(tween(3000)))
val p4 by rememberInfiniteTransition()
    .animateFloat(0f, 1f, infiniteRepeatable(tween(3000)))

// ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° ÑĞ»Ğ¾Ñ‘Ğ² Ñ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒÑ
WaveLayer(img, progress = p1, alpha = 1f, invert = false)
WaveLayer(img, progress = p2, alpha = 0.5f, invert = true)
WaveLayer(img, progress = p3, alpha = 0.2f, invert = false)
WaveLayer(img, progress = p4, alpha = 0.7f, invert = true)
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 3: ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ FIREBASE (Ğ Ğ¾Ğ¼Ğ°)

## 3.1 Firebase Authentication

**Ğ¢Ğ¸Ğ¿:** Email/Password  
**ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°:**
1. Firebase Console â†’ Authentication â†’ Sign-in method
2. Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Email/Password provider

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² ĞºĞ¾Ğ´Ğµ

```kotlin
// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ°
private val auth = FirebaseAuth.getInstance()

// Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
val currentUser = auth.currentUser
val userId = currentUser?.uid
val email = currentUser?.email

// Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ĞµĞ»ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
auth.addAuthStateListener { firebaseAuth ->
    val user = firebaseAuth.currentUser
    _isLoggedIn.value = user != null
    _currentUserEmail.value = user?.email
}

// Ğ’Ñ‹Ñ…Ğ¾Ğ´
auth.signOut()
```

## 3.2 Firebase Firestore

**Ğ ĞµĞ¶Ğ¸Ğ¼:** Test mode (Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸)  
**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸:**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ/Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    match /users/{userId}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

## 3.3 Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (build.gradle.kts)

```kotlin
dependencies {
    // Firebase BOM (Bill of Materials)
    implementation(platform("com.google.firebase:firebase-bom:32.7.0"))
    
    // Firebase Auth
    implementation("com.google.firebase:firebase-auth-ktx")
    
    // Firebase Firestore
    implementation("com.google.firebase:firebase-firestore-ktx")
}
```

## 3.4 ĞŸĞ»Ğ°Ğ³Ğ¸Ğ½ Google Services

**ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ build.gradle.kts:**
```kotlin
plugins {
    id("com.google.gms.google-services") version "4.4.0" apply false
}
```

**App build.gradle.kts:**
```kotlin
plugins {
    id("com.google.gms.google-services")
}
```

**Ğ¤Ğ°Ğ¹Ğ» ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:** `app/google-services.json` (ÑĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ· Firebase Console)

---

# Ğ—ĞĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•

## Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|--------|----------|
| ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | âœ… | Email/Password Ñ‡ĞµÑ€ĞµĞ· Firebase Auth |
| Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | âœ… | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° |
| ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹ | âœ… | Ğ¡ĞµÑ‚ĞºĞ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² |
| Ğ›ĞµĞ½Ñ‚Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² | âœ… | Ğ¡ĞµÑ‚ĞºĞ°/ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² |
| Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ | âœ… | CRUD Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ² Firestore |
| ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ° | âœ… | CRUD Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼ |
| ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ | âœ… | Ğ’Ğ¾Ğ»Ğ½Ñ‹, ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¸, Ğ¿Ğ¾ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² |

## Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

- **Ğ¯Ğ·Ñ‹Ğº:** Kotlin 2.0.21
- **UI:** Jetpack Compose + Material 3
- **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:** MVVM
- **DI:** Manual (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Hilt)
- **Backend:** Firebase (Auth + Firestore)
- **ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ:** Navigation Compose
- **Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ:** Coil
- **ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ:** Kotlin Coroutines + Flow

## Ğ”Ğ°Ğ»ÑŒĞ½ĞµĞ¹ÑˆĞµĞµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ğµ

1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¸ÑĞº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²
2. Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
3. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ (Firebase Cloud Messaging)
4. Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
5. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ¸ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ
6. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ

---

**ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Skrepta**  
**Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025**
